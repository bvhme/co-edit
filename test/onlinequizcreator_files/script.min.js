function initLogin(){$("#forgotpw").click(function(e){$(this).closest("form").hide(),e.preventDefault(),$("#forgotpwcontainer").removeClass("hidden")})}function owlyBlink(){var e=Math.ceil(5*Math.random())+2,t=300*e,i=$(".owly");setTimeout(function(){i.toggleClass("active"),owlyBlink()},t)}function initCategoriesUpdate(e){var t=$(".categoriecontainer"),i=$(".inputs",t),n=i.children(".item").length,a=function(){$remove=$(".inputs > .row",t),$remove.length>2?$remove.find(".remove").show():$remove.find(".remove").hide()},r=function(){var t=$(this),i=e.fileupload;i.$filesContainer=$(".filescontainer",$(this)),initFileupload(t,i)};$(".add",t).click(function(t){t.preventDefault(),n++;var o=$.parseHTML(e.inputTemplate.replace(/{n}/g,n));i.append(o),$(o).find(".input-image").each(r),$(o).find(".richtextfield textarea").tinymce(tinyMCE.activeEditor.settings),a(),qw.spectrum.updateFields()}),t.on("click",".remove",function(e){e.preventDefault();var t=$(this).parent().find(".remove-message");return t.length?void t.removeClass("hide"):($(this).closest("div.item").remove(),void a())}),a(),$(".input-image").each(r),qw.spectrum&&qw.spectrum.updateFields()}function initVATFields(e){var t=document.getElementById(e.model+"_vat_number"),i=document.getElementById(e.model+"_country"),n=document.getElementById(e.model+"_company_name"),a=["BE","BG","CZ","DK","DE","EE","IE","EL","ES","FR","HR","IT","CY","LV","LT","LU","HU","MT","NL","AT","PL","PT","RO","SI","SK","FI","SE","UK","GB"],r=function(){var e=a.indexOf(i.value)!==-1;t.parentNode.style.display=e&&n.value?"block":"none",e&&n.value||(t.value="")};$(i).change(r),$(n).change(r),r()}function initCurrencyFields(e){var t=document.getElementById(e.model+"_preferred_currency"),i=function(){var e=$(this).val(),t=function(){return $(this).data("currency")===e},i=function(){return $(this).data("currency")!==e},n=$(".price");n.filter(t).show().addClass("current"),n.filter(i).hide().removeClass("current")};$(t).on("change",i),i.call(t)}function initPublishPage(e){$("textarea, input").on("focus",function(){this.select()}),$("#crmselector").on("change",function(){var t=$(this).val();t&&(t=", "+t);var i=e.code.replace(/{adapter}/,t);$("#embedcode").val(i)}),$(e.old.toggle).on("click",function(t){t.preventDefault(),$(this).hide(),$(e.old.container).removeClass("hidden")})}function initAssessmentQuestion(e,t){var i=$("#assessmentquestionmodel, #editassessmentquestionformmodel"),n="";i.on("click",".tinyadd",function(t){t.preventDefault();var i=e.replace(/{n}/g,$(this).data("n")).replace(/{id}/g,Math.random().toString(36).substring(7)).replace("</select>",n+"</select>");$(this).parents(".categories:first").find(".items").append(i)}),i.on("click",".remove",function(e){e.preventDefault(),$(this).parents(".row:first").remove()});var a=$(".createcategoryform");if(a.dialog){a.dialog({autoOpen:!1,modal:!0,draggable:!1,width:600,height:"auto",resizable:!1}),$(".createcategory").on("click",function(e){e.preventDefault();var t="<ul>";$(".categoryselect:first option:not(:first)").each(function(){t+="<li>"+$(this).html()+"</li>"}),t+="</ul>",$(".dialogcategories").html(t),a.dialog("option","title",$(this).attr("title")),a.dialog("open"),$(".ui-dialog-content").height($(".ui-dialog").innerHeight()-90+"px");var i=$('.ui-dialog-content input[type="submit"]').offset();i&&$(".ui-dialog-content").animate({scrollTop:i.top},1e3)});var r=$("form",a);r.submit(function(e){e.preventDefault(),a.addClass("loading"),$.getJSON(r.attr("action"),{title:$('[name="title"]',r).val(),content:$('[name="content"]',r).val()},function(e){e.success&&($(".categoryselect").append(e.option),n+=e.option,$("input[type=text]",r).val(""),$('[name="content"]',r).html("").val(""),a.dialog("close"),a.removeClass("loading"))})})}else a.hide()}function initQuestions(e){var t=($(".radiocontainer span.ir"),$(".fieldscontainer"),$(".fieldscontainer > div"),$("#QuizMultipleChoiseQuestionTypeModel_correct_amount"));if(t.length){var i=function(){var i=+t.val(),n=function(t,n){return n=n||4,t>=i?i===n-1?e.wrongText:e.wrongText+" "+(t-i+1):1===i?e.correctText:e.correctText+" "+(t+1)},a=$("input").filter(function(){return/answer/.test(this.id)});a.each(function(e){var t=n(e,a.length);$(this).attr("placeholder",t),$("label[for="+this.id+"]").text(t),$(this).closest(".fieldgroup").find("h2").text(t)})};t.change(i),i()}$(".createanswers [data-more]").hide(),$(".createanswers").parent().on("click","#moreAnswers",function(e){e.preventDefault(),$(".createanswers [data-more]:hidden:first").show(),$(".createanswers [data-more]:hidden").size()||$(this).hide()})}function initAssessmentOptionsQuestion(e){var t=$("#addOption"),i=$("#optioncontainer"),n=function(){var e=$.map(i.children(".answer"),function(e){return+$(e).data("index")});return e.length?Math.max.apply(Math,e)+1:1},a=function(e){var t=$.map(e.children(".category-score"),function(e){return+$(e).data("index")});return t.length?Math.max.apply(Math,t)+1:1},r=function(t){var a=n(),r=$($.parseHTML(e.templates.option.replace(/\{i\}/g,a)));return r.data("index",a),t&&o(r),i.append(r),r},o=function(t){var i=$(t).find(".categories > .items"),n=t.data("index"),r=a(i),o=$($.parseHTML(e.templates.categories.replace(/\{i\}/g,n).replace(/\{j\}/g,r)));return o.data("index",r),i.append(o),o};i.on("click",".remove",function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest(".category-score");t.length?t.remove():$(this).closest(".answer").remove()}),i.on("click",".category-add",function(e){e.preventDefault(),e.stopPropagation(),o($(this).closest(".answer"))}),t.on("click",function(e){e.preventDefault(),r(!0)});var s=function(e,t){var i=function(){return this.name.indexOf("["+t+"]")!==-1};return e[0].name&&i.call(e[0])?e:$(e).find("input[name], select[name], textarea[name]").filter(i)};e.items.length||(e.items=[{answer:"",id:0,categories:[],scores:[]}]);for(var c=0;c<e.items.length;c++){var l=r(!1),d=e.items[c];s(l,"answer").val(d.answer),s(l,"id").val(d.id);for(var u=Math.min(d.scores.length,d.categories.length),m=0;m<u;m++){var p=o(l);s(p,"categories").val(d.categories[m]),s(p,"scores").val(d.scores[m])}0===u&&o(l)}}function initMaxAnswers(e){var t=$("#addOption"),n=$("#optioncontainer"),a=$(e.maxAnswers),r=$(e.maxAnswers+" :first-child").html(),o=function(){for(amountOfAnswers=n.children("div[data-group]").length,selected=a.val(),e='<option value="">'+r+"</option>",i=1;i<amountOfAnswers;i++)e+='<option value="'+i+'">'+i+"</option>";a.html(e),a.val(selected)};t.on("click",function(e){e.preventDefault(),o()}),n.on("click",".remove",function(e){e.preventDefault(),o()})}function initFileupload(e,t){var i=e,n=i.find("input[type=file]");if(n.size()){var a=i.find("input[type=hidden]"),r=i.closest("form"),o=i.find(".img-delete"),s="_"+n.attr("name").match(/\[([^\]]+)\]/)[1],c=void 0===t.$filesContainer?$("#files"+s):t.$filesContainer;fileuploadOptions={dropZone:i,dataType:"json",url:t.uploadUrl,autoUpload:!0,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,maxFileSize:5e6,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),previewCrop:!0,previewThumbnail:!1,multipart:!0,singleFileUploads:!0,maxNumberOfFiles:1,limitMultiFileUploads:1,filesContainer:c,replaceFileInput:!1},void 0!==t.fileupload&&$.extend(fileuploadOptions,t.fileupload),n.fileupload(fileuploadOptions).on("fileuploadadd",function(e,t){disableForm(r),n.fileupload("option","previewMaxWidth",c.parent().width()),n.fileupload("option","previewMaxHeight",c.parent().height()),c.empty(),t.context=$("<div/>").appendTo(c),$.each(t.files,function(e,i){var n=$("<p/>").append($("<span/>"));e||n.append("<br>"),n.appendTo(t.context)})}).on("fileuploadprocessalways",function(e,t){n.val("");var i=t.index,a=t.files[i],r=$(t.context.children()[i]);a.preview&&r.prepend("<br>").prepend(a.preview),a.error&&r.append("<br>").append($('<span class="text-danger"/>').text(a.error)),i+1===t.files.length&&t.context.find("button").text("Upload").prop("disabled",!!t.files.error)}).on("fileuploaddone",function(t,i){if(enableForm(r),i.result[0]){if(i.result[0].error){var s=$('<span class="errorMessage">').text(i.result[0].error);return e.addClass("error"),n.parent().after(s),a.val(""),void n.val("")}if($(".errorMessage",e).remove(),e.removeClass("error"),i.result[0].content&&c.html(i.result[0].content),i.result[0].update)for(var l in i.result[0].update)$(l).html(i.result[0].update[l]);a.val(i.result[0].name).trigger("change"),o.show()}}),o.on("click",function(e){e.preventDefault(),a.val("").trigger("change"),c.empty(),o.hide(),o.data("delete-url")&&$.getJSON(o.data("delete-url"),function(e){if(e.update)for(var t in e.update)$(t).html(e.update[t])})})}}function disableForm(e){var t=(e.data("disabledTimes")||0)+1;return t<=0&&(t=1),e.data("disabledTimes",t),t>=1&&(e.find("input[type=submit], button[type=submit]").addClass("disabled"),e.on("submit",stopEvent)),t}function enableForm(e){var t=(e.data("disabledTimes")||0)-1;return e.data("disabledTimes",t),t>0?t:(e.find("input[type=submit], button[type=submit]").removeClass("disabled"),e.off("submit",stopEvent),t)}function stopEvent(e){e.preventDefault(),e.stopPropagation()}function initImageUpload(e){$("html").hasClass("oldie")||$(".input-image").each(function(){var t=$(this),i=t.find("input[type=file]");initFileupload(t,{uploadUrl:e.baseUrl+"/index.php?r=manage"+e.type+"/uploadImage&fieldName="+encodeURIComponent(i.attr("name"))})})}function initSortableQuestionsIndex(e){var t=$("table.items tbody");t.sortable({helper:function(e,t){return t.children().each(function(){$(this).width($(this).width())}),t},update:function(){var i=t.sortable("serialize",{key:"items[]",attribute:"class"});e.token&&(i+="&"+e.token.name+"="+e.token.value),$.ajax({url:e.url,type:"post",data:i,success:function(){var e=1;$("tr td:first-child",t).each(function(){$(this).html(e++)})},error:function(){alert(e.error)}})}})}function initStatsPage(e,t){var i=$("#session-confirm-delete"),n=$("#session-action-delete"),a={};a[e]=function(){$form=$("#SessionSelectionForm"),$form.attr("action",n.prop("href")).submit(),$(this).dialog("close")},a[t]=function(){$(this).dialog("close")},i.dialog({resizable:!1,height:140,autoOpen:!1,modal:!0,buttons:a}),n.on("click",function(e){e.preventDefault(),i.dialog("open")})}function initQuizSettingsUpdate(e){e.image&&initImageUpload(e.image);var t=$("#QuizModel_enable_challenge_a_friend");if(t.length){var i=$("#QuizModel_challenge_a_friend_message, #QuizModel_challenge_a_friend_subject").parent(),n=function(){i[t[0].checked?"show":"hide"]()};t.on("change",n),n()}$("#QuizModel_share_facebook, #AssessmentModel_share_facebook, #ExamModel_share_facebook").change(function(){var e=this.checked?"show":"hide";$(".share_facebook_image")[e]()}).change(),$(".extrasettingintro").each(function(){var e=$(this),t=e.next(".extrasettings"),i=e.find(".checkboxfield input");i.prop("checked",!!t.find("input, textarea").filter(function(){return!!this.value}).length),i.on("change",function(){t[this.checked?"show":"hide"]()}).trigger("change")});var a=$("#tabs .errorMessage:not(.hide)").eq(0);if(a.length){var r=a.closest(".ui-tabs-panel").prevAll(".ui-tabs-panel").length;$("#tabs").tabs("option","active",r)}var o={backgroundColor:e.modelName+"_color_background",lightColor:e.modelName+"_color_light_color",primaryColor:e.modelName+"_color_primary_color",primaryText:e.modelName+"_color_primary_text",subColor:e.modelName+"_color_sub_color"};$("#"+e.modelName+"_stylesheet").on("change",function(){var t=e.defaultColors[this.value];for(var i in t)if(i in o){var n=document.getElementById(o[i]);$(n).spectrum("set",t[i])}})}function initSettingsPlayerInfo(e){var t=$("#QuizModel_account_askfields"),i=["profile","player","player"],n=i[t.val()],a=$("#accountRankingWarning");e.hideAccounts&&$("#QuizModel_account_askfields, #AssessmentModel_account_askfields, #ExamModel_account_askfields, #CoursModel_account_askfields").children("[value=0]").remove(),a.hide(),t.change(function(){a[i[t.val()]!=n?"show":"hide"]()}),$("#"+e.model+"_account_requirement").change(function(){var e=1!=this.value?"show":"hide";$(".extrainfocontainer")[e]()}).change(),$(".requiredplayerinfo select").change(function(){e.classMap[this.value]}).change(),$(".custom-question__input").change(function(){var e=$(this).closest(".custom-question").find(".custom-question__selectfield");$(this).val()?e.show():e.hide()}).change()}function initSettingsMoreFields(e){$(e).each(function(){for(var e=$(this),t=e.children("div"),i=e.find(".button"),n=t.length-1;n>0;n--){var a=t.eq(n);if(a.find("input[type=text]").filter(function(){return!!this.value}).length)break}var r=n+1;for(n=r;n<t.length;n++)t.eq(n).hide();var o=function(){r==t.length&&i.hide()};i.on("click",function(e){e.preventDefault(),t.eq(r).show(),r++,o()}),o()})}function initSettingsRequirements(e){}function initBehaviorConfig(e,t){var i=$("#"+e+"_behavior_"+t+"_enable"),n=$("#config_"+t+"_container");i.on("change",function(){n[this.checked?"show":"hide"]()}),i.change()}function initQuestionsOveriew(e){function t(e){var t=e+"";t&&($("#gridcontainer").show(),$("#gridcontainer").addClass("showgrid")),$("#gridcontainer tbody tr").each(function(){var e=$(this),i=e.find("input"),n=String(e.data("quizzes"));n.split(/,/).indexOf(t)!==-1?(e.addClass("incurrentquiz"),i.prop("checked",!0).prop("disabled",!0)):(e.removeClass("incurrentquiz"),i.prop("checked",!1).prop("disabled",!1))})}$("#gridcontainer").hide(),$("#gridcontainer").on("keypress",".filters input",function(e){"13"==e.which&&e.preventDefault()}),$("#gridcontainer").on("change","#selectallcheckboxhierboven",function(){$("#gridcontainer tbody input:not([disabled])").prop("checked",this.checked)});$("#QuestionsOverviewForm_quiz").change(function(){t(this.value)}),$("#gridcontainer").on("click",".showfullinfo",function(t){t.preventDefault();var i=$(this).closest("tr"),n=e.questionUrl.replace(/%7Bid%7D/g,i.data("id"));$("<div>").load(n,function(){$(this).dialog({resizable:!1,width:600,autoOpen:!0,modal:!0,title:e.dialogTitle})})}),$("#QuestionsOverviewForm_quiz").change()}function initExamSettingsUpdate(){var e=$("#ExamModel_time").parent();$("#ExamModel_time_limit").change(function(){$(this).val()?e.show():e.hide()}).trigger("change");var t=$("#ExamModel_number_of_attempts").parent();$("#ExamModel_type").change(function(){3==$(this).val()?t.show():t.hide()}).trigger("change")}function initExamQuestionIndex(e){if(e.allowRecycle){var t=$("#import-dialog").hide().dialog({modal:!0,autoOpen:!1,resizable:!1,"max-height":"500px",width:"600px",title:e.title});t.parent().css("max-width","600px"),$(".importquestion").on("click",function(e){e.preventDefault(),$.ajax({url:this.href,success:function(e){t.html(e).dialog("open")}})})}}function initUpdateAssessmentQuestionDescription(){var e=$("#desc_fields");$("#AssessmentQuestionModel_show_description").change(function(){0==$(this).val()?e.hide():e.show()}).change()}function initRounds(e){var t={nl:{dateFormat:"dd-mm-yy",hourGrid:6,minuteGrid:15,timeFormat:"hh:mm",changeMonth:!0,changeYear:!0,timeOnlyTitle:"Kies de tijd",timeText:"Tijd",hourText:"Uur",closeText:"Ok",minuteText:"Minuut",secondText:"Seconde"},en:{dateFormat:"dd-mm-yy",hourGrid:6,minuteGrid:15,timeFormat:"hh:mm",changeMonth:!0,changeYear:!0,timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",closeText:"Ok",minuteText:"Minute",secondText:"Second"}},i=function(){$(".datepicker").datetimepicker($.extend({showMonthAfterYear:!1},$.datepicker.regional[e.lang],t[e.lang]))};i(),$(".row.inputs").on("click",".remove:not(.disabled)",function(e){e.preventDefault(),$(this).parents("div.row:first").remove()}),$(".button.add:not(.disabled)").on("click",function(){var t={"{idx}":$(".row.inputs > div").length};$(".row.inputs").append(e.inputTemplate.replace(/\{[a-zA-Z_]+}/g,function(e){return t[e]||""})),i()})}function initUserManagement(){$(".import-user").hide(),$(".show-test-email").on("click",function(e){e.preventDefault(),$(".buttons-container").hide(200),$(".test-email").show(200)}),$(".show-csv-import").on("click",function(e){e.preventDefault(),$(".csv-import").show(200),$(".import-buttons").hide(200)}),$(".show-import-user").on("click",function(e){e.preventDefault(),$(".import-user").show(200),$(".import-buttons").hide(200)}),$(".cancel-import").on("click",function(e){e.preventDefault(),$(".csv-import").hide(200),$(".import-user").hide(200),$(".import-buttons").show(200)});var e=$("#dialog");e.on("submit","form",function(e){e.preventDefault(),$.fn.yiiGridView.update("users-table",{type:"POST",data:$(this).serialize()})}),$(".add-users").click(function(t){t.preventDefault(),e.data("loaded")||e.load($(this).attr("href")).data("loaded",!0),e.dialog("open")})}function initCourseElementIndex(e){$(".showsubtypes").click(function(e){e.preventDefault(),$(this).hide(),$(".subtypes").show()}),$(".subtypes .cancel").click(function(e){e.preventDefault(),$(".subtypes").hide(),$(".showsubtypes").show()}),$("[data-confirm]").click(function(e){confirm($(this).data("confirm"))||e.preventDefault()}),$container=$(".courselist"),$container.sortable({items:"li:not(.unsortable)",placeholder:"ui-sortable-placeholder",axis:"y",update:function(){var t=$container.sortable("serialize");e.token&&(t+="&"+e.token.name+"="+e.token.value),$.ajax({url:e.updateSortUrl,type:"post",data:t,success:function(){var e=1;$("li.courseitem span.step",$container).each(function(){$(this).html(e++)})},error:function(){alert(e.error)}})}}),$(".courselist").disableSelection()}function initPageLeave(e){$("form").on("change",function(){window.onbeforeunload=function(){return e}}),$("form").submit(function(){window.onbeforeunload=null}),$(".previewaction .button, .facebbutton").click(function(){window.onbeforeunload=null})}function tinyMceCustom(e){tinymce.PluginManager.add("qwmedia",function(e,t){function i(e){return e.indexOf(".mp3")!=-1?"audio/mpeg":e.indexOf(".wav")!=-1?"audio/wav":e.indexOf(".mp4")!=-1?"video/mp4":e.indexOf(".webm")!=-1?"video/webm":e.indexOf(".ogg")!=-1?"video/ogg":e.indexOf(".swf")!=-1?"application/x-shockwave-flash":""}function n(t){var i=e.settings.media_scripts;if(i)for(var n=0;n<i.length;n++)if(t.indexOf(i[n].filter)!==-1)return i[n]}function a(){function t(e){var t,i,r,o;t=n.find("#width")[0],i=n.find("#height")[0],r=t.value(),o=i.value(),n.find("#constrain")[0].checked()&&a&&l&&r&&o&&(e.control==t?(o=Math.round(r/a*o),i.value(o)):(r=Math.round(o/l*r),t.value(r))),a=r,l=o}function i(){d=s(this.value()),this.parent().parent().fromJSON(d)}var n,a,l,d,u=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onchange:function(e){tinymce.each(e.meta,function(e,t){n.find("#"+t).value(e)})}}];e.settings.media_alt_source!==!1&&u.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),e.settings.media_poster!==!1&&u.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),e.settings.media_dimensions!==!1&&u.push({type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:3,size:3,onchange:t},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:3,size:3,onchange:t},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),d=c(e.selection.getNode()),a=d.width,l=d.height;var p={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:r(),multiline:!0,label:"Source",minWidth:300,minHeight:100};p[m]=i,n=e.windowManager.open({title:"Insert/edit video or iframe",data:d,body:{title:"Embed",type:"panel",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,onShowTab:function(){this.find("#embed").value(o(this.parent().toJSON()))},items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},p]},onSubmit:function(){var t,i,n,a;for(t=e.dom.select("img[data-mce-object]"),e.insertContent(o(this.toJSON())),i=e.dom.select("img[data-mce-object]"),n=0;n<t.length;n++)for(a=i.length-1;a>=0;a--)t[n]==i[a]&&i.splice(a,1);e.selection.select(i[0]),e.nodeChanged()}})}function r(){var t=e.selection.getNode();if(t.getAttribute("data-mce-object"))return e.selection.getContent()}function o(a){var r="";if(!a.source1&&(tinymce.extend(a,s(a.embed)),!a.source1))return"";if(a.source2||(a.source2=""),a.poster||(a.poster=""),a.source1=e.convertURL(a.source1,"source"),a.source2=e.convertURL(a.source2,"source"),a.source1mime=i(a.source1),a.source2mime=i(a.source2),a.poster=e.convertURL(a.poster,"poster"),a.flashPlayerUrl=e.convertURL(t+"/moxieplayer.swf","movie"),tinymce.each(u,function(e){var t,i,n;if(t=e.regex.exec(a.source1)){for(n=e.url,i=0;t[i];i++)n=n.replace("$"+i,function(){return t[i]});a.source1=n,a.type=e.type,a.width=a.width||e.w,a.height=a.height||e.h}}),a.embed)r=d(a.embed,a,!0);else{var o=n(a.source1);o&&(a.type="script",a.width=o.width,a.height=o.height),a.width=a.width||300,a.height=a.height||150,tinymce.each(a,function(t,i){a[i]=e.dom.encode(t)}),"iframe"==a.type?r+='<iframe src="'+a.source1+'" width="'+a.width+'" height="'+a.height+'"></iframe>':"application/x-shockwave-flash"==a.source1mime?(r+='<object data="'+a.source1+'" width="'+a.width+'" height="'+a.height+'" type="application/x-shockwave-flash">',a.poster&&(r+='<img src="'+a.poster+'" width="'+a.width+'" height="'+a.height+'" />'),r+="</object>"):a.source1mime.indexOf("audio")!=-1?e.settings.audio_template_callback?r=e.settings.audio_template_callback(a):r+='<audio controls="controls" src="'+a.source1+'">'+(a.source2?'\n<source src="'+a.source2+'"'+(a.source2mime?' type="'+a.source2mime+'"':"")+" />\n":"")+"</audio>":"script"==a.type?r+='<script src="'+a.source1+'"></script>':r=e.settings.video_template_callback?e.settings.video_template_callback(a):'<video width="'+a.width+'" height="'+a.height+'"'+(a.poster?' poster="'+a.poster+'"':"")+' controls="controls">\n<source src="'+a.source1+'"'+(a.source1mime?' type="'+a.source1mime+'"':"")+" />\n"+(a.source2?'<source src="'+a.source2+'"'+(a.source2mime?' type="'+a.source2mime+'"':"")+" />\n":"")+"</video>"}return r}function s(e){var t={};return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(e,i){if(t.source1||"param"!=e||(t.source1=i.map.movie),"iframe"!=e&&"object"!=e&&"embed"!=e&&"video"!=e&&"audio"!=e||(t.type||(t.type=e),t=tinymce.extend(i.map,t)),"script"==e){var a=n(i.map.src);if(!a)return;t={type:"script",source1:i.map.src,width:a.width,height:a.height}}"source"==e&&(t.source1?t.source2||(t.source2=i.map.src):t.source1=i.map.src),"img"!=e||t.poster||(t.poster=i.map.src)}}).parse(e),t.source1=t.source1||t.src||t.data,t.source2=t.source2||"",t.poster=t.poster||"",t}function c(t){return t.getAttribute("data-mce-object")?s(e.serializer.serialize(t,{selection:!0})):{}}function l(t){if(e.settings.media_filter_html===!1)return t;var i=new tinymce.html.Writer;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(e,t,n){if("script"!=e&&"noscript"!=e){for(var a=0;a<t.length;a++)if(0===t[a].name.indexOf("on"))return;i.start(e,t,n)}},end:function(e){"script"!=e&&"noscript"!=e&&i.end(e)}},new tinymce.html.Schema({})).parse(t),i.getContent()}function d(e,t,i){function n(e,t){var i,n,a,r;for(i in t)if(a=""+t[i],e.map[i])for(n=e.length;n--;)r=e[n],r.name==i&&(a?(e.map[i]=a,r.value=a):(delete e.map[i],e.splice(n,1)));else a&&(e.push({name:i,value:a}),e.map[i]=a)}var a,r=new tinymce.html.Writer,o=0;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){r.comment(e)},cdata:function(e){r.cdata(e)},text:function(e,t){r.text(e,t)},start:function(e,s,c){switch(e){case"video":case"object":case"embed":case"img":case"iframe":n(s,{width:t.width,height:t.height})}if(i)switch(e){case"video":n(s,{poster:t.poster,src:""}),t.source2&&n(s,{src:""});break;case"iframe":n(s,{src:t.source1});break;case"source":if(o++,o<=2&&(n(s,{src:t["source"+o],type:t["source"+o+"mime"]}),!t["source"+o]))return;break;case"img":if(!t.poster)return;a=!0}r.start(e,s,c)},end:function(e){if("video"==e&&i)for(var s=1;s<=2;s++)if(t["source"+s]){var c=[];c.map={},o<s&&(n(c,{src:t["source"+s],type:t["source"+s+"mime"]}),r.start("source",c,!0))}if(t.poster&&"object"==e&&i&&!a){var l=[];l.map={},n(l,{src:t.poster,width:t.width,height:t.height}),r.start("img",l,!0)}r.end(e)}},new tinymce.html.Schema({})).parse(e),r.getContent()}var u=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$1"},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$2"},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc"},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0"},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"'},{regex:/players\.brightcove\.net\/([0-9]+)\/([0-9a-zA-Z_]+)\/index.html\?videoId=([0-9]+)/,type:"iframe",w:425,h:350,url:"//players.brightcove.net/$1/$2/index.html?videoId=$3"}],m=tinymce.Env.ie&&tinymce.Env.ie<=8?"onChange":"onInput";e.on("ResolveName",function(e){var t;1==e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),e.on("preInit",function(){var t=e.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var i=e.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){i[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(t,i){for(var a,r,o,s,c,l,d,u,m=t.length;m--;)if(r=t[m],r.parent&&("script"!=r.name||(u=n(r.attr("src"))))){for(o=new tinymce.html.Node("img",1),o.shortEnded=!0,u&&(u.width&&r.attr("width",u.width.toString()),u.height&&r.attr("height",u.height.toString())),l=r.attributes,a=l.length;a--;)s=l[a].name,c=l[a].value,"width"!==s&&"height"!==s&&"style"!==s&&("data"!=s&&"src"!=s||(c=e.convertURL(c,s)),o.attr("data-mce-p-"+s,c));d=r.firstChild&&r.firstChild.value,d&&(o.attr("data-mce-html",escape(d)),o.firstChild=null),o.attr({width:r.attr("width")||"300",height:r.attr("height")||("audio"==i?"30":"150"),style:r.attr("style"),src:tinymce.Env.transparentSrc,"data-mce-object":i,"class":"mce-object mce-object-"+i}),r.replace(o)}}),e.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var i,n,a,r,o,s,c,d=e.length;d--;)if(i=e[d],i.parent){for(c=i.attr(t),n=new tinymce.html.Node(c,1),"audio"!=c&&"script"!=c&&n.attr({width:i.attr("width"),height:i.attr("height")}),n.attr({style:i.attr("style")}),r=i.attributes,a=r.length;a--;){var u=r[a].name;0===u.indexOf("data-mce-p-")&&n.attr(u.substr(11),r[a].value)}"script"==c&&n.attr("type","text/javascript"),o=i.attr("data-mce-html"),o&&(s=new tinymce.html.Node("#text",3),s.raw=!0,s.value=l(unescape(o)),n.append(s)),i.replace(n)}})}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!=t&&"script"!=t||e.preventDefault()}),e.on("objectResized",function(e){var t,i=e.target;i.getAttribute("data-mce-object")&&(t=i.getAttribute("data-mce-html"),t&&(t=unescape(t),i.setAttribute("data-mce-html",escape(d(t,{width:e.width,height:e.height})))))}),e.addButton("media",{tooltip:"Insert/edit video",onclick:a,stateSelector:["img[data-mce-object=video]","img[data-mce-object=iframe]"]}),e.addMenuItem("media",{icon:"media",text:"Insert video",onclick:a,context:"insert",prependToContext:!0})})}function initDialCode(e){var t=e.watchField,i=e.preview;$(t).on("change",function(e){dialcode=$(this).find(":selected").data("dialcode"),dialcode?$(i).text(dialcode):$(i).text(" ")}),$(t).trigger("change")}function initChartPreview(){google.load("visualization","1",{packages:["corechart"],callback:function(){var $element=$("[data-chart-preview]"),previewData=google.visualization.arrayToDataTable(eval($element.data("chart-preview"))),$previewContainer=$("<div data-preview-container />");showChart=function(chartType,options){var $container=$("."+chartType,$previewContainer);$container.size()||($container=$('<div class="'+chartType+' chart" />'),$previewContainer.append($container)),$container.show();var chart=new google.visualization[chartType]($container.get(0));chart.draw(previewData,eval(options))},$element.parents("div:first").after($previewContainer),$element.change(function(){$(".chart",$previewContainer).hide();var e=$('[value="'+$element.val()+'"]',$element);e.data("bar-horizontal")?showChart("BarChart",e.data("bar-horizontal")):e.data("bar-vertical")&&showChart("ColumnChart",e.data("bar-vertical"))}).change()}})}function beforeCopyQuestionValidate(){var e=$("#modal-copied-question");return!!e.data("done")||(e.foundation("reveal","open"),!1)}function initCopyQuestion(){var e=$("#modal-copied-question");$("a",e).click(function(t){var i=$(this).data("target");i&&(t.preventDefault(),e.data("done",!0),$(i).prop("checked",!0).parents("form").submit())})}$(function(){$("li.tab-title a").each(function(){var e=$(this).attr("href");$(this).attr("href","#"+e.split("#")[1])}),$(document).foundation()}),function(e){e.fn.equalHeights=function(){var t=0;return this.each(function(){e(this).height()>t&&(t=e(this).height())}),this.each(function(){e(this).height(t)})};var t=e(".menubar"),i=e(".mainnavbar"),n=e(".page-wrap"),a=t.offset(),r=a?a.top:0,o=function(){var a=e(window).scrollTop();a>r&&e(window).width()>=960?(t.css({position:"fixed",top:0,left:0}),i.removeClass("fixednav"),i.addClass("fixednav"),n.css({"margin-top":"50px"})):(t.css({position:"relative"}),n.css({"margin-top":"0"}),i.removeClass("fixednav"))};o(),e(window).scroll(function(){o()}),0!==e(".dropdownify").length&&(e(".dropdownify").each(function(){e(this).children(e(".dropdowntitle")).click(function(t){e(this).next(".dropdownblock").show(),e(this).parent().addClass("opened"),t.stopPropagation()})}),e("html").click(function(){e(".dropdownify.opened").children(".dropdownblock").hide(),e(".dropdownify.opened").removeClass("opened")})),e("a.navlink").click(function(e){e.preventDefault()})}(jQuery),$(function(){$(window).width()>=768&&($(".equal1").equalHeights(),$(".equal2").equalHeights(),$(".equal3").equalHeights())}),$(function(){$("html").hasClass("oldie")||$("[data-image-upload]").each(function(){var e=$(this);initFileupload(e,{uploadUrl:e.parents("form").attr("action")+"&ajaxUpload=1"})})}),window.yii=function(e){function t(){e(document).ajaxComplete(function(e,t,i){var n=t&&t.getResponseHeader("X-Redirect");n&&(window.location=n)})}function i(){e.ajaxPrefilter(function(e,t,i){!e.crossDomain&&c.getCsrfParam()&&i.setRequestHeader("X-CSRF-Token",c.getCsrfToken())}),c.refreshCsrfToken()}function n(){var t=function(t){var i=e(this),n=i.data("method"),a=i.data("confirm"),r=i.data("form");return void 0===n&&void 0===a&&void 0===r||(void 0!==a?e.proxy(c.confirm,this)(a,function(){c.handleAction(i,t)}):c.handleAction(i,t),t.stopImmediatePropagation(),!1)};e(document).on("click.yii",c.clickableSelector,t).on("change.yii",c.changeableSelector,t)}function a(e){for(var t=o(),i=0;i<c.reloadableScripts.length;i++){var n=c.reloadableScripts[i];n="/"===n.charAt(0)?t+n:n;var a=new RegExp("^"+r(n).split("\\*").join(".*")+"$").test(e);if(a===!0)return!0}return!1}function r(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function o(){return location.protocol+"//"+location.host}function s(){for(var t=o(),i={},n=e("script[src]").map(function(){return"/"===this.src.charAt(0)?t+this.src:this.src}).toArray(),r=0,s=n.length;r<s;r++)i[n[r]]=!0;e.ajaxPrefilter("script",function(e,n,r){if("jsonp"!=e.dataType){var o="/"===e.url.charAt(0)?t+e.url:e.url;if(o in i){var s=i[o];s===!0||a(o)?a(o)||r.abort():(s.done(function(){r&&4!==r.readyState&&r.abort()}),r.done(function(){
s&&4!==s.readyState&&s.abort()}))}else i[o]=r.done(function(){i[o]=!0}).fail(function(){delete i[o]})}}),e(document).ajaxComplete(function(t,i,n){var r=[];e("link[rel=stylesheet]").each(function(){a(this.href)||(e.inArray(this.href,r)==-1?r.push(this.href):e(this).remove())})})}var c={reloadableScripts:[],clickableSelector:'a, button, input[type="submit"], input[type="button"], input[type="reset"], input[type="image"]',changeableSelector:"select, input, textarea",getCsrfParam:function(){return e("meta[name=csrf-param]").attr("content")},getCsrfToken:function(){return e("meta[name=csrf-token]").attr("content")},setCsrfToken:function(t,i){e("meta[name=csrf-param]").attr("content",t),e("meta[name=csrf-token]").attr("content",i)},refreshCsrfToken:function(){var t=c.getCsrfToken();t&&e('form input[name="'+c.getCsrfParam()+'"]').val(t)},confirm:function(e,t,i){confirm(e)?!t||t():!i||i()},handleAction:function(t,i){var n,a=t.attr("data-form")?e("#"+t.attr("data-form")):t.closest("form"),r=!t.data("method")&&a?a.attr("method"):t.data("method"),o=t.attr("href"),s=t.data("params"),l=t.data("pjax"),d=!!t.data("pjax-push-state"),u=!!t.data("pjax-replace-state"),m=t.data("pjax-timeout"),p=t.data("pjax-scrollto"),h=t.data("pjax-push-redirect"),f=t.data("pjax-replace-redirect"),v=t.data("pjax-skip-outer-containers"),g={};if(void 0!==l&&e.support.pjax&&(n=t.data("pjax-container")?t.data("pjax-container"):t.closest('[data-pjax-container=""]'),n.length||(n=e("body")),g={container:n,push:d,replace:u,scrollTo:p,pushRedirect:h,replaceRedirect:f,pjaxSkipOuterContainers:v,timeout:m,originalEvent:i,originalTarget:t}),void 0===r)return void(o&&"#"!=o?void 0!==l&&e.support.pjax?e.pjax.click(i,g):window.location=o:t.is(":submit")&&a.length&&(void 0!==l&&e.support.pjax&&a.on("submit",function(t){e.pjax.submit(t,g)}),a.trigger("submit")));var b=!a.length;if(b){o&&o.match(/(^\/|:\/\/)/)||(o=window.location.href),a=e("<form/>",{method:r,action:o});var y=t.attr("target");if(y&&a.attr("target",y),r.match(/(get|post)/i)||(a.append(e("<input/>",{name:"_method",value:r,type:"hidden"})),r="POST"),!r.match(/(get|head|options)/i)){var $=c.getCsrfParam();$&&a.append(e("<input/>",{name:$,value:c.getCsrfToken(),type:"hidden"}))}a.hide().appendTo("body")}var w=a.data("yiiActiveForm");w&&(w.submitObject=t),s&&e.isPlainObject(s)&&e.each(s,function(t,i){a.append(e("<input/>").attr({name:t,value:i,type:"hidden"}))});var x=a.attr("method");a.attr("method",r);var k=null;o&&"#"!=o&&(k=a.attr("action"),a.attr("action",o)),void 0!==l&&e.support.pjax&&a.on("submit",function(t){e.pjax.submit(t,g)}),a.trigger("submit"),e.when(a.data("yiiSubmitFinalizePromise")).then(function(){null!=k&&a.attr("action",k),a.attr("method",x),s&&e.isPlainObject(s)&&e.each(s,function(t,i){e('input[name="'+t+'"]',a).remove()}),b&&a.remove()})},getQueryParams:function(t){var i=t.indexOf("?");if(i<0)return{};var n,a,r=t.substring(i+1).split("#")[0].split("&"),o={};for(a=0;a<r.length;a++){n=r[a].split("=");var s=decodeURIComponent(n[0].replace(/\+/g,"%20")),c=decodeURIComponent(n[1].replace(/\+/g,"%20"));s.length&&(void 0!==o[s]?(e.isArray(o[s])||(o[s]=[o[s]]),o[s].push(c||"")):o[s]=c||"")}return o},initModule:function(t){(void 0===t.isActive||t.isActive)&&(e.isFunction(t.init)&&t.init(),e.each(t,function(){e.isPlainObject(this)&&c.initModule(this)}))},init:function(){i(),t(),s(),n()}};return c}(jQuery),jQuery(function(){yii.initModule(yii)}),yii.validation=function(e){function t(t,i,n){if("undefined"==typeof File)return[];var a=e(t.input,t.$form).get(0).files;return a?0===a.length?(n.skipOnEmpty||i.push(n.uploadRequired),[]):n.maxFiles&&n.maxFiles<a.length?(i.push(n.tooMany),[]):a:(i.push(n.message),[])}function i(e,t,i){if(i.extensions&&i.extensions.length>0){var a,r;a=e.name.lastIndexOf("."),r=~a?e.name.substr(a+1,e.name.length).toLowerCase():"",~i.extensions.indexOf(r)||t.push(i.wrongExtension.replace(/\{file\}/g,e.name))}i.mimeTypes&&i.mimeTypes.length>0&&(n(i.mimeTypes,e.type)||t.push(i.wrongMimeType.replace(/\{file\}/g,e.name))),i.maxSize&&i.maxSize<e.size&&t.push(i.tooBig.replace(/\{file\}/g,e.name)),i.minSize&&i.minSize>e.size&&t.push(i.tooSmall.replace(/\{file\}/g,e.name))}function n(e,t){for(var i=0,n=e.length;i<n;i++)if(new RegExp(e[i]).test(t))return!0;return!1}var a={isEmpty:function(e){return null===e||void 0===e||e==[]||""===e},addMessage:function(e,t,i){e.push(t.replace(/\{value\}/g,i))},required:function(t,i,n){var r=!1;if(void 0===n.requiredValue){var o="string"==typeof t||t instanceof String;(n.strict&&void 0!==t||!n.strict&&!a.isEmpty(o?e.trim(t):t))&&(r=!0)}else(!n.strict&&t==n.requiredValue||n.strict&&t===n.requiredValue)&&(r=!0);r||a.addMessage(i,n.message,t)},"boolean":function(e,t,i){if(!i.skipOnEmpty||!a.isEmpty(e)){var n=!i.strict&&(e==i.trueValue||e==i.falseValue)||i.strict&&(e===i.trueValue||e===i.falseValue);n||a.addMessage(t,i.message,e)}},string:function(e,t,i){if(!i.skipOnEmpty||!a.isEmpty(e)){if("string"!=typeof e)return void a.addMessage(t,i.message,e);void 0!==i.min&&e.length<i.min&&a.addMessage(t,i.tooShort,e),void 0!==i.max&&e.length>i.max&&a.addMessage(t,i.tooLong,e),void 0!==i.is&&e.length!=i.is&&a.addMessage(t,i.notEqual,e)}},file:function(n,a,r){var o=t(n,a,r);e.each(o,function(e,t){i(t,a,r)})},image:function(n,a,r,o){var s=t(n,a,r);e.each(s,function(t,n){if(i(n,a,r),"undefined"!=typeof FileReader){var s=e.Deferred(),c=new FileReader,l=new Image;l.onload=function(){r.minWidth&&this.width<r.minWidth&&a.push(r.underWidth.replace(/\{file\}/g,n.name)),r.maxWidth&&this.width>r.maxWidth&&a.push(r.overWidth.replace(/\{file\}/g,n.name)),r.minHeight&&this.height<r.minHeight&&a.push(r.underHeight.replace(/\{file\}/g,n.name)),r.maxHeight&&this.height>r.maxHeight&&a.push(r.overHeight.replace(/\{file\}/g,n.name)),s.resolve()},l.onerror=function(){a.push(r.notImage.replace(/\{file\}/g,n.name)),s.resolve()},c.onload=function(){l.src=c.result},c.onerror=function(){s.resolve()},c.readAsDataURL(n),o.push(s)}})},number:function(e,t,i){if(!i.skipOnEmpty||!a.isEmpty(e)){if("string"==typeof e&&!e.match(i.pattern))return void a.addMessage(t,i.message,e);void 0!==i.min&&e<i.min&&a.addMessage(t,i.tooSmall,e),void 0!==i.max&&e>i.max&&a.addMessage(t,i.tooBig,e)}},range:function(t,i,n){if(!n.skipOnEmpty||!a.isEmpty(t)){if(!n.allowArray&&e.isArray(t))return void a.addMessage(i,n.message,t);var r=!0;e.each(e.isArray(t)?t:[t],function(t,i){return e.inArray(i,n.range)!=-1||(r=!1,!1)}),n.not===r&&a.addMessage(i,n.message,t)}},regularExpression:function(e,t,i){i.skipOnEmpty&&a.isEmpty(e)||(!i.not&&!e.match(i.pattern)||i.not&&e.match(i.pattern))&&a.addMessage(t,i.message,e)},email:function(e,t,i){if(!i.skipOnEmpty||!a.isEmpty(e)){var n=!0,r=/^((?:"?([^"]*)"?\s)?)(?:\s+)?(?:(<?)((.+)@([^>]+))(>?))$/,o=r.exec(e);null===o?n=!1:(i.enableIDN&&(o[5]=punycode.toASCII(o[5]),o[6]=punycode.toASCII(o[6]),e=o[1]+o[3]+o[5]+"@"+o[6]+o[7]),n=!(o[5].length>64)&&(!((o[5]+"@"+o[6]).length>254)&&(e.match(i.pattern)||i.allowName&&e.match(i.fullPattern)))),n||a.addMessage(t,i.message,e)}},url:function(e,t,i){if(!i.skipOnEmpty||!a.isEmpty(e)){i.defaultScheme&&!e.match(/:\/\//)&&(e=i.defaultScheme+"://"+e);var n=!0;if(i.enableIDN){var r=/^([^:]+):\/\/([^\/]+)(.*)$/,o=r.exec(e);null===o?n=!1:e=o[1]+"://"+punycode.toASCII(o[2])+o[3]}n&&e.match(i.pattern)||a.addMessage(t,i.message,e)}},trim:function(t,i,n){var r=t.find(i.input),o=r.val();return n.skipOnEmpty&&a.isEmpty(o)||(o=e.trim(o),r.val(o)),o},captcha:function(t,i,n){if(!n.skipOnEmpty||!a.isEmpty(t)){var r=e("body").data(n.hashKey);r=null==r?n.hash:r[n.caseSensitive?0:1];for(var o=n.caseSensitive?t:t.toLowerCase(),s=o.length-1,c=0;s>=0;--s)c+=o.charCodeAt(s);c!=r&&a.addMessage(i,n.message,t)}},compare:function(t,i,n){if(!n.skipOnEmpty||!a.isEmpty(t)){var r,o=!0;switch(r=void 0===n.compareAttribute?n.compareValue:e("#"+n.compareAttribute).val(),"number"===n.type&&(t=parseFloat(t),r=parseFloat(r)),n.operator){case"==":o=t==r;break;case"===":o=t===r;break;case"!=":o=t!=r;break;case"!==":o=t!==r;break;case">":o=t>r;break;case">=":o=t>=r;break;case"<":o=t<r;break;case"<=":o=t<=r;break;default:o=!1}o||a.addMessage(i,n.message,t)}},ip:function(e,t,i){var n=function(e){return e.indexOf(":")===-1?4:6},r=null,o=null;if(!i.skipOnEmpty||!a.isEmpty(e)){var s=new RegExp(i.ipParsePattern).exec(e);return s&&(r=s[1]||null,e=s[2],o=s[4]||null),i.subnet===!0&&null===o?void a.addMessage(t,i.messages.noSubnet,e):i.subnet===!1&&null!==o?void a.addMessage(t,i.messages.hasSubnet,e):i.negation===!1&&null!==r?void a.addMessage(t,i.messages.message,e):void(6==n(e)?(i.ipv6||a.addMessage(t,i.messages.ipv6NotAllowed,e),new RegExp(i.ipv6Pattern).test(e)||a.addMessage(t,i.messages.message,e)):(i.ipv4||a.addMessage(t,i.messages.ipv4NotAllowed,e),new RegExp(i.ipv4Pattern).test(e)||a.addMessage(t,i.messages.message,e)))}}};return a}(jQuery),function(e){e.fn.yiiActiveForm=function(t){return s[t]?s[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.yiiActiveForm"),!1):s.init.apply(this,arguments)};var t,i={beforeValidate:"beforeValidate",afterValidate:"afterValidate",beforeValidateAttribute:"beforeValidateAttribute",afterValidateAttribute:"afterValidateAttribute",beforeSubmit:"beforeSubmit",ajaxBeforeSend:"ajaxBeforeSend",ajaxComplete:"ajaxComplete",afterInit:"afterInit"},n={encodeErrorSummary:!0,errorSummary:".error-summary",validateOnSubmit:!0,errorCssClass:"has-error",successCssClass:"has-success",validatingCssClass:"validating",ajaxParam:"ajax",ajaxDataType:"json",validationUrl:void 0,scrollToError:!0},a={id:void 0,name:void 0,container:void 0,input:void 0,error:".help-block",encodeError:!0,validateOnChange:!0,validateOnBlur:!0,validateOnType:!1,validationDelay:500,enableAjaxValidation:!1,validate:void 0,status:0,cancelled:!1,value:void 0},r=function(i){t=e.Deferred(),i.data("yiiSubmitFinalizePromise",t.promise())},o=function(e){t&&(t.resolve(),t=void 0,e.removeData("yiiSubmitFinalizePromise"))},s={init:function(t,r){return this.each(function(){var o=e(this);if(!o.data("yiiActiveForm")){var l=e.extend({},n,r||{});void 0===l.validationUrl&&(l.validationUrl=o.attr("action")),e.each(t,function(i){t[i]=e.extend({value:b(o,this)},a,this),c(o,t[i])}),o.data("yiiActiveForm",{settings:l,attributes:t,submitting:!1,validated:!1,options:p(o)}),o.bind("reset.yiiActiveForm",s.resetForm),l.validateOnSubmit&&(o.on("mouseup.yiiActiveForm keyup.yiiActiveForm",":submit",function(){o.data("yiiActiveForm").submitObject=e(this)}),o.on("submit.yiiActiveForm",s.submitForm));var d=e.Event(i.afterInit);o.trigger(d)}})},add:function(t){var i=e(this);t=e.extend({value:b(i,t)},a,t),i.data("yiiActiveForm").attributes.push(t),c(i,t)},remove:function(t){var i=e(this),n=i.data("yiiActiveForm").attributes,a=-1,r=void 0;return e.each(n,function(e){if(n[e].id==t)return a=e,r=n[e],!1}),a>=0&&(n.splice(a,1),l(i,r)),r},validateAttribute:function(t){var i=s.find.call(this,t);void 0!=i&&d(e(this),i,!0)},find:function(t){var i=e(this).data("yiiActiveForm").attributes,n=void 0;return e.each(i,function(e){if(i[e].id==t)return n=i[e],!1}),n},destroy:function(){return this.each(function(){e(this).unbind(".yiiActiveForm"),e(this).removeData("yiiActiveForm")})},data:function(){return this.data("yiiActiveForm")},validate:function(t){t&&(e(this).data("yiiActiveForm").submitting=!0);var n=e(this),a=n.data("yiiActiveForm"),r=!1,s={},c=u(),l=a.submitting;if(l){var d=e.Event(i.beforeValidate);if(n.trigger(d,[s,c]),d.result===!1)return a.submitting=!1,void o(n)}e.each(a.attributes,function(){if(this.$form=n,!e(this.input).is(":disabled")&&(this.cancelled=!1,a.submitting||2===this.status||3===this.status)){var t=s[this.id];void 0===t&&(t=[],s[this.id]=t);var o=e.Event(i.beforeValidateAttribute);n.trigger(o,[this,t,c]),o.result!==!1?(this.validate&&this.validate(this,b(n,this),t,c,n),this.enableAjaxValidation&&(r=!0)):this.cancelled=!0}}),e.when.apply(this,c).always(function(){for(var t in s)0===s[t].length&&delete s[t];if(r&&(e.isEmptyObject(s)||a.submitting)){var c=a.submitObject,d="&"+a.settings.ajaxParam+"="+n.attr("id");c&&c.length&&c.attr("name")&&(d+="&"+c.attr("name")+"="+c.attr("value")),e.ajax({url:a.settings.validationUrl,type:n.attr("method"),data:n.serialize()+d,dataType:a.settings.ajaxDataType,complete:function(e,t){n.trigger(i.ajaxComplete,[e,t])},beforeSend:function(e,t){n.trigger(i.ajaxBeforeSend,[e,t])},success:function(t){null!==t&&"object"==typeof t?(e.each(a.attributes,function(){this.enableAjaxValidation&&!this.cancelled||delete t[this.id]}),h(n,e.extend(s,t),l)):h(n,s,l)},error:function(){a.submitting=!1,o(n)}})}else a.submitting?setTimeout(function(){h(n,s,l)},200):h(n,s,l)})},submitForm:function(){var t=e(this),n=t.data("yiiActiveForm");if(n.validated){n.submitting=!1;var a=e.Event(i.beforeSubmit);return t.trigger(a),a.result===!1?(n.validated=!1,o(t),!1):(f(t),!0)}return r(t),void 0!==n.settings.timer&&clearTimeout(n.settings.timer),n.submitting=!0,s.validate.call(t),!1},resetForm:function(){var t=e(this),i=t.data("yiiActiveForm");setTimeout(function(){e.each(i.attributes,function(){this.value=b(t,this),this.status=0;var e=t.find(this.container);e.removeClass(i.settings.validatingCssClass+" "+i.settings.errorCssClass+" "+i.settings.successCssClass),e.find(this.error).html("")}),t.find(i.settings.errorSummary).hide().find("ul").html("")},1)},updateMessages:function(t,i){var n=e(this),a=n.data("yiiActiveForm");e.each(a.attributes,function(){v(n,this,t)}),i&&g(n,t)},updateAttribute:function(t,i){var n=s.find.call(this,t);if(void 0!=n){var a={};a[t]=i,v(e(this),n,a)}}},c=function(t,i){var n=y(t,i);i.validateOnChange&&n.on("change.yiiActiveForm",function(){d(t,i,!1)}),i.validateOnBlur&&n.on("blur.yiiActiveForm",function(){0!=i.status&&1!=i.status||d(t,i,!0)}),i.validateOnType&&n.on("keyup.yiiActiveForm",function(n){e.inArray(n.which,[16,17,18,37,38,39,40])===-1&&i.value!==b(t,i)&&d(t,i,!1,i.validationDelay)})},l=function(e,t){y(e,t).off(".yiiActiveForm")},d=function(t,i,n,a){var r=t.data("yiiActiveForm");n&&(i.status=2),e.each(r.attributes,function(){this.value!==b(t,this)&&(this.status=2,n=!0)}),n&&(void 0!==r.settings.timer&&clearTimeout(r.settings.timer),r.settings.timer=setTimeout(function(){r.submitting||t.is(":hidden")||(e.each(r.attributes,function(){2===this.status&&(this.status=3,t.find(this.container).addClass(r.settings.validatingCssClass))}),s.validate.call(t))},a?a:200))},u=function(){var t=[];return t.add=function(t){this.push(new e.Deferred(t))},t},m=["action","target","method","enctype"],p=function(e){for(var t={},i=0;i<m.length;i++)t[m[i]]=e.attr(m[i]);return t},h=function(t,n,a){var r=t.data("yiiActiveForm");if(void 0===r)return!1;if(a){var s=[];if(e.each(r.attributes,function(){e(this.input).is(":disabled")||this.cancelled||!v(t,this,n)||s.push(this)}),t.trigger(i.afterValidate,[n,s]),g(t,n),s.length){if(r.settings.scrollToError){var c=t.find(e.map(s,function(e){return e.input}).join(",")).first().closest(":visible").offset().top,l=e(window).scrollTop();(c<l||c>l+e(window).height())&&e(window).scrollTop(c)}r.submitting=!1}else r.validated=!0,r.submitObject?r.submitObject.trigger("click"):t.submit()}else e.each(r.attributes,function(){this.cancelled||2!==this.status&&3!==this.status||v(t,this,n)});o(t)},f=function(t){var i=t.data("yiiActiveForm"),n=i.submitObject||t.find(":submit:first");if(n.length&&"submit"==n.attr("type")&&n.attr("name")){var a=e('input[type="hidden"][name="'+n.attr("name")+'"]',t);a.length?a.attr("value",n.attr("value")):e("<input>").attr({type:"hidden",name:n.attr("name"),value:n.attr("value")}).appendTo(t)}},v=function(t,n,a){var r=t.data("yiiActiveForm"),o=y(t,n),s=!1;if(e.isArray(a[n.id])||(a[n.id]=[]),t.trigger(i.afterValidateAttribute,[n,a[n.id]]),n.status=1,o.length){s=a[n.id].length>0;var c=t.find(n.container),l=c.find(n.error);s?(n.encodeError?l.text(a[n.id][0]):l.html(a[n.id][0]),c.removeClass(r.settings.validatingCssClass+" "+r.settings.successCssClass).addClass(r.settings.errorCssClass)):(l.empty(),c.removeClass(r.settings.validatingCssClass+" "+r.settings.errorCssClass+" ").addClass(r.settings.successCssClass)),n.value=b(t,n)}return s},g=function(t,i){var n=t.data("yiiActiveForm"),a=t.find(n.settings.errorSummary),r=a.find("ul").empty();a.length&&i&&(e.each(n.attributes,function(){if(e.isArray(i[this.id])&&i[this.id].length){var t=e("<li/>");n.settings.encodeErrorSummary?t.text(i[this.id][0]):t.html(i[this.id][0]),r.append(t)}}),a.toggle(r.find("li").length>0))},b=function(e,t){var i=y(e,t),n=i.attr("type");if("checkbox"===n||"radio"===n){var a=i.filter(":checked");return a.length||(a=e.find('input[type=hidden][name="'+i.attr("name")+'"]')),a.val()}return i.val()},y=function(e,t){var i=e.find(t.input);return i.length&&"div"===i[0].tagName.toLowerCase()?i.find("input"):i}}(window.jQuery);
//# sourceMappingURL=maps/script.min.js.map
